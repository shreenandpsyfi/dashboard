<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profiling - Parliament Chart</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            min-height: 100vh;
            background-color: #2d3139;
        }
        #root {
            min-height: 100vh;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9) translateY(30px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .profile-card {
            animation: fadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .content-section {
            animation: slideIn 0.5s ease-out backwards;
        }
        .content-section:nth-child(2) { animation-delay: 0.1s; }
        .content-section:nth-child(3) { animation-delay: 0.15s; }
        .content-section:nth-child(4) { animation-delay: 0.2s; }
        .content-section:nth-child(5) { animation-delay: 0.25s; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useMemo } = React;

        const ParliamentChart = () => {
          const [data, setData] = useState([
            { 
              cluster: 'The Pragmatic Optimiser', 
              size: 74, 
              color: '#843356',
              age: '48 years old',
              profession: 'Senior Professional',
              tagline: 'Clear mind. Sharp focus. No fluff.',
              traits: ['Late adopters after validation', 'Mental clarity seekers', 'Not emotionally exploratory', 'Open, but not early adopters'],
              messaging: '"You optimise your body. Why not your mind?"',
              trustSignal: 'Scientific Research and Clinical Validation'
            },
            { 
              cluster: 'The Emotionally Engaged', 
              size: 27, 
              color: '#CE575D',
              age: '24 years old',
              profession: 'Entry-level Professional',
              tagline: 'Feel it. Face it. Grow through it.',
              traits: ['Immediate adopters', 'Emotional reset seekers', 'Actively using/have used mental health tools', 'High adoption readiness'],
              messaging: '"You optimise your body. Why not your mind?" | "This isn\'t therapy. No talking, no pressure - just mental training for daily life"',
              trustSignal: 'Scientific Research and Clinical Validation and Mental Health Expert Recommendation'
            },
            { 
              cluster: 'The Clarity Seeking Professional', 
              size: 33, 
              color: '#FF6F61',
              age: '52 years old',
              profession: 'Senior Professional',
              tagline: 'Clear mind. Confident self. Backed by science.',
              traits: ['Immediate adopters', 'Mental clarity seekers', 'Actively using/have used mental health tools', 'High adoption readiness'],
              messaging: '"Discover the power of a clear mind and the ripple effects across your life"',
              trustSignal: 'Scientific Research and Clinical Validation'
            },
            { 
              cluster: 'The Grounded Go-Getter', 
              size: 33, 
              color: '#802F9D',
              age: '50 years old',
              profession: 'Senior Professional',
              tagline: 'Reset your mind. Reclaim your day.',
              traits: ['Mid-term adopters', 'Emotional reset seekers', 'Open and adoption-ready', 'Moderate emotional awareness'],
              messaging: '"Break the cycle: Whether it\'s endless scrolling, emotional overeating, or snapping at loved ones"',
              trustSignal: 'Recommendation by a friend, relative, or peer'
            },
            { 
              cluster: 'The Pattern Breaker', 
              size: 18, 
              color: '#a879a8',
              age: '28 years old',
              profession: 'Early Career Professional',
              tagline: 'Break the loop. Build a better you.',
              traits: ['Mid-term adopters', 'Behavioural change seekers', 'High adoption willingness', 'Moderate emotional awareness'],
              messaging: '"You optimise your body. Why not your mind?" | "Break the cycle: Whether it\'s endless scrolling, emotional overeating, or snapping at loved ones"',
              trustSignal: 'No significant trust signals'
            }
          ]);

          const [hoveredCluster, setHoveredCluster] = useState(null);
          const [selectedCluster, setSelectedCluster] = useState(null);

          const totalSeats = data.reduce((sum, d) => sum + d.size, 0);

          const seats = useMemo(() => {
            // PERFECT 180° SEMICIRCLE - 6 rows for balanced, straight semicircle
            const rows = 6;
            const seatsPerRow = [21, 25, 29, 34, 39, 45]; // Total = 193 seats
            const innerRadius = 170;
            const rowSpacing = 30;
            const centerX = 400;
            const centerY = 440;
            
            const allPositions = [];
            
            for (let row = 0; row < rows; row++) {
              const radius = innerRadius + row * rowSpacing;
              const seatsInThisRow = seatsPerRow[row];
              
              for (let seat = 0; seat < seatsInThisRow; seat++) {
                // PERFECT 180° angle: from 180° (left) to 0° (right)
                const angle = 180 - (seat / (seatsInThisRow - 1)) * 180;
                const radian = (angle * Math.PI) / 180;
                const x = centerX + radius * Math.cos(radian);
                const y = centerY - radius * Math.sin(radian);
                
                allPositions.push({
                  x,
                  y,
                  angle,
                  radius: 10
                });
              }
            }
            
            // Sort by angle LEFT to RIGHT (180° to 0°)
            allPositions.sort((a, b) => b.angle - a.angle);
            
            // Assign clusters LEFT to RIGHT sequentially
            const seatsWithClusters = [];
            let seatIndex = 0;
            
            // Assign each cluster's seats in order from LEFT to RIGHT
            for (let clusterIdx = 0; clusterIdx < data.length; clusterIdx++) {
              const cluster = data[clusterIdx];
              
              for (let i = 0; i < cluster.size; i++) {
                if (seatIndex < allPositions.length) {
                  seatsWithClusters.push({
                    ...allPositions[seatIndex],
                    cluster: cluster.cluster,
                    color: cluster.color,
                    size: cluster.size
                  });
                  seatIndex++;
                }
              }
            }
            
            return seatsWithClusters;
          }, [data]);

          const centerInfo = useMemo(() => {
            if (hoveredCluster) {
              const cluster = data.find(d => d.cluster === hoveredCluster);
              return { size: cluster.size, name: cluster.cluster };
            }
            return { size: totalSeats, name: '' };
          }, [hoveredCluster, data, totalSeats]);

          const clusterZones = useMemo(() => {
            const zones = [];
            data.forEach(cluster => {
              const clusterSeats = seats.filter(s => s.cluster === cluster.cluster);
              if (clusterSeats.length === 0) return;
              
              const minX = Math.min(...clusterSeats.map(s => s.x));
              const maxX = Math.max(...clusterSeats.map(s => s.x));
              const minY = Math.min(...clusterSeats.map(s => s.y));
              const maxY = Math.max(...clusterSeats.map(s => s.y));
              
              zones.push({
                cluster: cluster.cluster,
                x: minX - 20,
                y: minY - 20,
                width: maxX - minX + 40,
                height: maxY - minY + 40
              });
            });
            return zones;
          }, [seats, data]);

          const handleClusterClick = (clusterName) => {
            const cluster = data.find(d => d.cluster === clusterName);
            setSelectedCluster(cluster);
          };

          return (
            <div style={{ 
              minHeight: '100vh', 
              backgroundColor: '#2d3139', 
              display: 'flex', 
              flexDirection: 'column', 
              alignItems: 'center', 
              padding: '2rem',
              paddingBottom: '4rem',
              position: 'relative'
            }}>
              <h1 style={{ 
                color: 'white', 
                fontSize: '3rem', 
                fontWeight: 'bold', 
                marginBottom: '2rem',
                letterSpacing: '0.05em'
              }}>User Profiling</h1>

              <div style={{ marginBottom: '3rem' }}>
                <svg width="800" height="550" style={{ display: 'block' }}>
                  {clusterZones.map((zone, idx) => (
                    <rect
                      key={`zone-${idx}`}
                      x={zone.x}
                      y={zone.y}
                      width={zone.width}
                      height={zone.height}
                      fill="transparent"
                      style={{ cursor: 'pointer' }}
                      onMouseEnter={() => setHoveredCluster(zone.cluster)}
                      onMouseLeave={() => setHoveredCluster(null)}
                      onClick={() => handleClusterClick(zone.cluster)}
                    />
                  ))}
                  
                  {seats.map((seat, idx) => (
                    <circle
                      key={idx}
                      cx={seat.x}
                      cy={seat.y}
                      r={seat.radius}
                      fill={seat.color}
                      opacity={hoveredCluster === null || hoveredCluster === seat.cluster ? 1 : 0.3}
                      style={{
                        transition: 'all 0.2s',
                        filter: hoveredCluster === seat.cluster ? 'brightness(1.15)' : 'none',
                        pointerEvents: 'none'
                      }}
                    />
                  ))}

                  <text
                    x="400"
                    y="445"
                    textAnchor="middle"
                    style={{ 
                      fontFamily: 'Arial, sans-serif', 
                      fontWeight: 700,
                      fontSize: '96px',
                      fill: 'white',
                      userSelect: 'none',
                      pointerEvents: 'none'
                    }}
                  >
                    {centerInfo.size}
                  </text>
                  
                  {hoveredCluster && (
                    <text
                      x="400"
                      y="475"
                      textAnchor="middle"
                      style={{ 
                        fontSize: '13px',
                        fill: 'white',
                        userSelect: 'none',
                        pointerEvents: 'none'
                      }}
                    >
                      {centerInfo.name}
                    </text>
                  )}
                </svg>
              </div>

              <div style={{ 
                width: '100%', 
                maxWidth: '800px',
                marginTop: '2rem'
              }}>
                <div style={{ 
                  display: 'flex', 
                  justifyContent: 'space-between', 
                  alignItems: 'center',
                  marginBottom: '1rem',
                  paddingBottom: '0.5rem',
                  borderBottom: '1px solid #6b7280'
                }}>
                  <h2 style={{ 
                    color: 'white', 
                    fontSize: '0.875rem', 
                    fontWeight: 600,
                    letterSpacing: '0.025em'
                  }}>Cluster</h2>
                  <h2 style={{ 
                    color: 'white', 
                    fontSize: '0.875rem', 
                    fontWeight: 600,
                    letterSpacing: '0.025em'
                  }}>Cluster Size</h2>
                </div>
                {data.map((item, idx) => (
                  <div
                    key={idx}
                    style={{
                      display: 'flex',
                      justifyContent: 'space-between',
                      alignItems: 'center',
                      padding: '0.625rem 0.5rem',
                      borderRadius: '0.25rem',
                      cursor: 'pointer',
                      transition: 'all 0.15s',
                      backgroundColor: hoveredCluster === item.cluster ? 'rgba(255,255,255,0.08)' : 'transparent'
                    }}
                    onMouseEnter={() => setHoveredCluster(item.cluster)}
                    onMouseLeave={() => setHoveredCluster(null)}
                    onClick={() => handleClusterClick(item.cluster)}
                  >
                    <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem' }}>
                      <div
                        style={{ 
                          width: '12px', 
                          height: '12px', 
                          borderRadius: '50%',
                          backgroundColor: item.color,
                          flexShrink: 0
                        }}
                      />
                      <span style={{ color: 'white', fontSize: '0.875rem' }}>{item.cluster}</span>
                    </div>
                    <span style={{ color: 'white', fontSize: '0.875rem', fontWeight: 500 }}>{item.size}</span>
                  </div>
                ))}
              </div>

              {/* Profile Card Modal */}
              {selectedCluster && (
                <div 
                  style={{
                    position: 'fixed',
                    top: 0,
                    left: 0,
                    right: 0,
                    bottom: 0,
                    backgroundColor: 'rgba(0, 0, 0, 0.9)',
                    display: 'flex',
                    alignItems: 'flex-start',
                    justifyContent: 'center',
                    zIndex: 1000,
                    padding: '3rem 2rem 2rem 2rem',
                    paddingTop: '5vh',
                    backdropFilter: 'blur(8px)',
                    animation: 'fadeIn 0.3s ease-out',
                    overflowY: 'auto'
                  }}
                  onClick={() => setSelectedCluster(null)}
                >
                  <div 
                    className="profile-card"
                    style={{
                      position: 'relative',
                      backgroundColor: selectedCluster.color,
                      borderRadius: '2rem',
                      padding: '2rem 2.5rem',
                      maxWidth: '520px',
                      width: '100%',
                      boxShadow: `0 40px 80px -12px ${selectedCluster.color}60, 0 0 0 1px rgba(255,255,255,0.1)`,
                      background: `linear-gradient(145deg, ${selectedCluster.color} 0%, ${selectedCluster.color}e6 50%, ${selectedCluster.color}cc 100%)`
                    }}
                    onClick={(e) => e.stopPropagation()}
                  >
                    {/* Animated background elements */}
                    <div style={{
                      position: 'absolute',
                      top: '-80px',
                      right: '-80px',
                      width: '200px',
                      height: '200px',
                      borderRadius: '50%',
                      backgroundColor: 'rgba(255, 255, 255, 0.08)',
                      pointerEvents: 'none',
                      animation: 'pulse 3s ease-in-out infinite'
                    }} />
                    <div style={{
                      position: 'absolute',
                      bottom: '-50px',
                      left: '-50px',
                      width: '150px',
                      height: '150px',
                      borderRadius: '50%',
                      backgroundColor: 'rgba(255, 255, 255, 0.05)',
                      pointerEvents: 'none',
                      animation: 'pulse 4s ease-in-out infinite'
                    }} />
                    
                    {/* Close button */}
                    <button
                      onClick={() => setSelectedCluster(null)}
                      style={{
                        position: 'absolute',
                        top: '1.25rem',
                        right: '1.25rem',
                        width: '36px',
                        height: '36px',
                        borderRadius: '50%',
                        backgroundColor: 'rgba(255, 255, 255, 0.15)',
                        border: '2px solid rgba(255, 255, 255, 0.25)',
                        display: 'flex',
                        alignItems: 'center',
                        justifyContent: 'center',
                        cursor: 'pointer',
                        transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',
                        zIndex: 10
                      }}
                      onMouseEnter={(e) => {
                        e.target.style.backgroundColor = 'rgba(255, 255, 255, 0.25)';
                        e.target.style.transform = 'rotate(90deg) scale(1.15)';
                        e.target.style.borderColor = 'rgba(255, 255, 255, 0.4)';
                      }}
                      onMouseLeave={(e) => {
                        e.target.style.backgroundColor = 'rgba(255, 255, 255, 0.15)';
                        e.target.style.transform = 'rotate(0deg) scale(1)';
                        e.target.style.borderColor = 'rgba(255, 255, 255, 0.25)';
                      }}
                    >
                      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" style={{ pointerEvents: 'none' }}>
                        <path d="M12 4L4 12M4 4L12 12" stroke="white" strokeWidth="2.5" strokeLinecap="round"/>
                      </svg>
                    </button>
                    {/* Header */}
                    <div className="content-section" style={{ marginBottom: '1.5rem', textAlign: 'center', position: 'relative', zIndex: 1 }}>
                      <h2 style={{
                        color: 'white',
                        fontSize: '1.6rem',
                        fontWeight: 'bold',
                        marginBottom: '0.5rem',
                        textTransform: 'uppercase',
                        letterSpacing: '0.05em',
                        textShadow: '0 2px 10px rgba(0, 0, 0, 0.3)'
                      }}>
                        {selectedCluster.cluster}
                      </h2>
                      <p style={{
                        color: 'rgba(255, 255, 255, 0.9)',
                        fontSize: '0.9rem',
                        fontWeight: 500,
                        marginBottom: '0.5rem'
                      }}>
                        {selectedCluster.age} | {selectedCluster.profession}
                      </p>
                      <p style={{
                        color: 'white',
                        fontSize: '1.1rem',
                        fontWeight: 600,
                        fontStyle: 'italic',
                        marginTop: '0.5rem',
                        textShadow: '0 2px 8px rgba(0, 0, 0, 0.2)'
                      }}>
                        {selectedCluster.tagline}
                      </p>
                    </div>

                    {/* Key Traits */}
                    <div className="content-section" style={{ marginBottom: '1.5rem', position: 'relative', zIndex: 1 }}>
                      <h3 style={{
                        color: 'white',
                        fontSize: '1rem',
                        fontWeight: 700,
                        marginBottom: '0.65rem',
                        textTransform: 'uppercase',
                        letterSpacing: '0.05em'
                      }}>
                        Key Traits
                      </h3>
                      <div style={{ 
                        display: 'flex', 
                        flexDirection: 'column', 
                        gap: '0.5rem',
                        backgroundColor: 'rgba(255, 255, 255, 0.12)',
                        padding: '1rem',
                        borderRadius: '1rem',
                        backdropFilter: 'blur(10px)',
                        border: '1px solid rgba(255, 255, 255, 0.15)',
                        transition: 'all 0.3s ease'
                      }}>
                        {selectedCluster.traits.map((trait, idx) => (
                          <div
                            key={idx}
                            style={{
                              display: 'flex',
                              alignItems: 'center',
                              gap: '0.5rem',
                              transition: 'transform 0.2s ease'
                            }}
                          >
                            <span style={{
                              color: 'white',
                              fontSize: '1.1rem',
                              fontWeight: 'bold'
                            }}>•</span>
                            <span style={{
                              color: 'rgba(255, 255, 255, 0.95)',
                              fontSize: '0.85rem',
                              lineHeight: '1.4'
                            }}>
                              {trait}
                            </span>
                          </div>
                        ))}
                      </div>
                    </div>

                    {/* Messaging Preference */}
                    <div className="content-section" style={{ marginBottom: '1.5rem', position: 'relative', zIndex: 1 }}>
                      <h3 style={{
                        color: 'white',
                        fontSize: '1rem',
                        fontWeight: 700,
                        marginBottom: '0.65rem',
                        textTransform: 'uppercase',
                        letterSpacing: '0.05em'
                      }}>
                        Messaging Preference
                      </h3>
                      <div style={{
                        backgroundColor: 'rgba(255, 255, 255, 0.12)',
                        padding: '1rem',
                        borderRadius: '1rem',
                        backdropFilter: 'blur(10px)',
                        border: '1px solid rgba(255, 255, 255, 0.15)',
                        transition: 'all 0.3s ease'
                      }}>
                        <p style={{
                          color: 'rgba(255, 255, 255, 0.95)',
                          fontSize: '0.85rem',
                          lineHeight: '1.5',
                          fontStyle: 'italic'
                        }}>
                          {selectedCluster.messaging}
                        </p>
                      </div>
                    </div>

                    {/* Trust Signal */}
                    <div className="content-section" style={{ position: 'relative', zIndex: 1 }}>
                      <h3 style={{
                        color: 'white',
                        fontSize: '1rem',
                        fontWeight: 700,
                        marginBottom: '0.65rem',
                        textTransform: 'uppercase',
                        letterSpacing: '0.05em'
                      }}>
                        Trust Signal
                      </h3>
                      <div style={{
                        backgroundColor: 'rgba(255, 255, 255, 0.12)',
                        padding: '1rem',
                        borderRadius: '1rem',
                        backdropFilter: 'blur(10px)',
                        border: '1px solid rgba(255, 255, 255, 0.15)',
                        transition: 'all 0.3s ease'
                      }}>
                        <p style={{
                          color: 'rgba(255, 255, 255, 0.95)',
                          fontSize: '0.85rem',
                          lineHeight: '1.5'
                        }}>
                          {selectedCluster.trustSignal}
                        </p>
                      </div>
                    </div>


                  </div>
                </div>
              )}
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ParliamentChart />);
    </script>
</body>
</html>
